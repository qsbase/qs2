PKG_CPPFLAGS=-DRCPP_USE_UNWIND_PROTECT -DRCPP_NO_RTTI -DRCPP_NO_SUGAR -I. @ZSTD_INCLUDE_PATH@ @LZ4_INCLUDE_PATH@ @SIMD_FLAG@
PKG_CXXFLAGS = $(shell ${R_HOME}/bin/Rscript -e "RcppParallel::CxxFlags()")
PKG_LIBS=-L. -lpthread @COMPILER_SPECIFIC_LIBS@ @ZSTD_LIBS@ @LZ4_LIBS@ $(shell ${R_HOME}/bin/Rscript -e "RcppParallel::RcppParallelLibs()")

LIBZSTD = ZSTD/zstd.o
LIBLZ4  = LZ4/lz4.o LZ4/lz4hc.o

$(SHLIB): @ZSTD_SHLIB@ @LZ4_SHLIB@

libQSZSTD.a: $(LIBZSTD)
	$(AR) rcs libQSZSTD.a $(LIBZSTD)

libQSLZ4.a: $(LIBLZ4)
	$(AR) rcs libQSLZ4.a $(LIBLZ4)

clean:
	rm -f $(SHLIB) $(OBJECTS) @ZSTD_CLEAN@ @LZ4_CLEAN@

